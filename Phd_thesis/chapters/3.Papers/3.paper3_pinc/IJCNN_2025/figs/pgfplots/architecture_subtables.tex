%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Neural network size experiment
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{\pgfplotstableread[col sep=comma]{%
    Result, {4/32}, {3/32}, {5/32}, {4/16}, {4/64}
    $\mathcal{L}_1$, -4.85, -4.78, -4.51, -5.04, -4.93
    $\mathcal{L}_2$, -3.37, -3.27, -2.94, -3.56, -3.47
    $\mathcal{L}_3$, -2.67, -2.25, -2.56, -2.69, -2.60
    $\mathcal{L}_4$, -4.99, -4.90, -4.69, -5.24, -5.16
    $\mathcal{L}_5$, -4.70, -4.60, -4.37, -4.87, -4.74
}\tableL

\pgfplotstableread[col sep=comma]{%
    Result, {4/32}, {3/32}, {5/32}, {4/16}, {4/64}
    $\text{VPT}_1$, 1.51, 1.23, 0.58, 1.36, 1.12
    $\text{VPT}_2$, 1.27, 0.62, 0.46, 1.32, 1.16
    $\text{VPT}_3$, 1.46, 1.31, 0.58, 1.31, 1.11
}\tableVPT

\centering
\begin{tikzpicture}
    \matrix[matrix of nodes, nodes={align=left, anchor=west, font=\small}]
        {
            \fill[draw=red,fill=red!50] (0,-0.1) rectangle (0.2,0.1); & {4/32} & [10pt]
            \fill[draw=green,fill=green!50] (0,-0.1) rectangle (0.2,0.1); & {3/32} & [10pt]
            \fill[draw=blue,fill=blue!50] (0,-0.1) rectangle (0.2,0.1); & {5/32} & [10pt]
            \fill[draw=cyan,fill=cyan!50] (0,-0.1) rectangle (0.2,0.1); & {4/16} & [10pt]
            \fill[draw=magenta,fill=magenta!50] (0,-0.1) rectangle (0.2,0.1); & {4/64} \\
        };
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{subfigure}{0}
\subfloat{
    \subfloat{
        \begin{tikzpicture}
    \begin{axis}[
        every axis plot post/.style={/pgf/number format/fixed},
        width=\PlotHeight,
        ybar=1,
        x=0.75cm,
        ylabel near ticks,
        xtick=data,
        enlarge x limits=0.12,
        bar width=2,
        ymajorgrids=true,
        grid style=dashed,
        xticklabel style={rotate=0},
        label style={font=\small},
        tick label style={font=\small},
        ylabel={$\log_{10}~\quad~\leftarrow$},
        symbolic x coords={$\mathcal{L}_1$,$\mathcal{L}_2$,$\mathcal{L}_3$,$\mathcal{L}_4$,$\mathcal{L}_5$}
        ]
    \addplot[draw=red,fill=red!50] table[x=Result, y={4/32}] {\tableL};
    \addplot[draw=green,fill=green!50] table[x=Result, y={3/32}] {\tableL};
    \addplot[draw=blue,fill=blue!50] table[x=Result, y={5/32}] {\tableL};
    \addplot[draw=cyan,fill=cyan!50] table[x=Result, y={4/16}] {\tableL};
    \addplot[draw=magenta,fill=magenta!50] table[x=Result, y={4/64}] {\tableL};
    \end{axis}
        \end{tikzpicture}
        \label{fig:b2d_center}}
    \hfill
    \subfloat{
        \begin{tikzpicture}
    \begin{axis}[
        every axis plot post/.style={/pgf/number format/fixed},
        width=\PlotHeight,
        ybar=1,
        x=0.75cm,
        ylabel near ticks,
        xtick=data,
        enlarge x limits=0.2,
        bar width=2,
        ymajorgrids=true,
        grid style=dashed,
        xticklabel style={rotate=0},
        label style={font=\small},
        tick label style={font=\small},
        ylabel={time [\si{s}]$~\quad~\rightarrow$},
        symbolic x coords={$\text{VPT}_1$,$\text{VPT}_2$,$\text{VPT}_3$}
        ]
    \addplot[draw=red,fill=red!50] table[x=Result, y={4/32}] {\tableVPT};
    \addplot[draw=green,fill=green!50] table[x=Result, y={3/32}] {\tableVPT};
    \addplot[draw=blue,fill=blue!50] table[x=Result, y={5/32}] {\tableVPT};
    \addplot[draw=cyan,fill=cyan!50] table[x=Result, y={4/16}] {\tableVPT};
    \addplot[draw=magenta,fill=magenta!50] table[x=Result, y={4/64}] {\tableVPT};
    \end{axis}
    %\subcaption{Neural network size}
        \end{tikzpicture}
 %       \setcounter{subfigure}{1}
%\subcaption{Neural network size}
        \label{fig:neural_size}}
}
\setcounter{subfigure}{0}

\subcaption{\footnotesize{Neural network size.}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Residual connection ablation experiment
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\vspace{0.5cm}


\pgfplotstableread[col sep=comma]{%
    Result, {with residual connection}, {without residual connection}
    $\mathcal{L}_1$, -4.85, -0.69
    $\mathcal{L}_2$, -3.37, 2.09
    $\mathcal{L}_3$, -2.67, -0.83
    $\mathcal{L}_4$, -4.99, -0.79 
    $\mathcal{L}_5$, -4.70, -0.61
}\tableL

\pgfplotstableread[col sep=comma]{%
    Result, {with residual connection}, {without residual connection}
    $\text{VPT}_1$, 1.51, 0.0
    $\text{VPT}_2$, 1.27, 0.0
    $\text{VPT}_3$, 1.46, 0.0
}\tableVPT

\centering
%\begin{center}
\begin{tikzpicture}
    \matrix[matrix of nodes, nodes={align=left, anchor=west, font=\small}]
        {
            \fill[draw=red,fill=red!50] (0,-0.1) rectangle (0.2,0.1); & {without residual connection} & [10pt]
            \fill[draw=green, fill=green!50] (0,-0.1) rectangle (0.2,0.1); & {with residual connection} \\
        };
\end{tikzpicture}
%\end{center}


%% Log Error
\subfloat{
    \subfloat{
        \begin{tikzpicture}
    \begin{axis}[
        every axis plot post/.style={/pgf/number format/fixed},
        width=\PlotHeight,
        ybar=1,
        x=0.7cm,
        ylabel near ticks,
        xtick=data,
        enlarge x limits=0.12,
        bar width=7,
        ymajorgrids=true,
        grid style=dashed,
        xticklabel style={rotate=0},
        label style={font=\small},
        tick label style={font=\small},
        ylabel={$\log_{10}~\quad~\leftarrow$},
        symbolic x coords={$\mathcal{L}_1$,$\mathcal{L}_2$,$\mathcal{L}_3$,$\mathcal{L}_4$,$\mathcal{L}_5$}
        ]
    \addplot[draw=red,fill=red!50] table[x=Result, y={without residual connection}] {\tableL};
    \addplot[draw=green,fill=green!50] table[x=Result, y={with residual connection}]  {\tableL};
    \end{axis}
        \end{tikzpicture}
        \label{fig:logE}}
    \hfill
%% VPT
    \subfloat{
        \begin{tikzpicture}
    \begin{axis}[
        every axis plot post/.style={/pgf/number format/fixed},
        width=\PlotHeight,
        ybar=1,
        x=0.8cm,
        ylabel near ticks,
        xtick=data,
        enlarge x limits=0.2,
        bar width=7,
        ymajorgrids=true,
        grid style=dashed,
        xticklabel style={rotate=0},
        label style={font=\small},
        tick label style={font=\small},
        ylabel={time [\si{s}]$~\quad~\rightarrow$},
        symbolic x coords={$\text{VPT}_1$,$\text{VPT}_2$,$\text{VPT}_3$}
        ]
    \addplot[draw=red,fill=red!50] table[x=Result, y={without residual connection}] {\tableVPT};
    \addplot[draw=green,fill=green!50] table[x=Result, y={with residual connection}]  {\tableVPT};
    \end{axis}
        \end{tikzpicture}
        \label{fig:neural_s}}   
}

\setcounter{subfigure}{1}

\subcaption{\footnotesize{Residual connection ablation experiment.}}

        
%\subcaption{Residual connection ablation experiment}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Adaptive activation function comparison
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\pgfplotstableread[col sep=comma]{%
    Result, {with residual connection}, {without residual connection}
    $\mathcal{L}_1$, -4.85, -5.13
    $\mathcal{L}_2$, -3.37, -3.64
    $\mathcal{L}_3$, -2.67, -2.57
    $\mathcal{L}_4$, -4.99, -5.35 
    $\mathcal{L}_5$, -4.70, -4.89
}\tableL

\pgfplotstableread[col sep=comma]{%
    Result, {with residual connection}, {without residual connection}
    $\text{VPT}_1$, 1.51, 0.96
    $\text{VPT}_2$, 1.27, 1.17
    $\text{VPT}_3$, 1.46, 0.86
}\tableVPT

\centering
%\begin{center}
\begin{tikzpicture}
    \matrix[matrix of nodes, nodes={align=left, anchor=west, font=\small}]
        {
            \fill[draw=cyan, fill=cyan!50] (0,-0.1) rectangle (0.2,0.1); & \lstinline|softplus| & [10pt]
            \fill[draw=magenta, fill=magenta!50] (0,-0.1) rectangle (0.2,0.1); & \lstinline|tanh| \\
        };
\end{tikzpicture}
%\end{center}


%% Log Error
\subfloat{
    \subfloat{
        \begin{tikzpicture}
    \begin{axis}[
        every axis plot post/.style={/pgf/number format/fixed},
        width=\PlotHeight,
        ybar=1,
        x=0.7cm,
        ylabel near ticks,
        xtick=data,
        enlarge x limits=0.12,
        bar width=8,
        ymajorgrids=true,
        grid style=dashed,
        xticklabel style={rotate=0},
        label style={font=\small},
        tick label style={font=\small},
        ylabel={$\log_{10}~\quad~\leftarrow$},
        symbolic x coords={$\mathcal{L}_1$,$\mathcal{L}_2$,$\mathcal{L}_3$,$\mathcal{L}_4$,$\mathcal{L}_5$}
        ]
    \addplot[draw=cyan,fill=cyan!50] table[x=Result, y={with residual connection}] {\tableL};
    \addplot[draw=magenta,fill=magenta!50] table[x=Result, y={without residual connection}]  {\tableL};
    \end{axis}
        \end{tikzpicture}
        \label{fig:logE}}
    \hfill
%% VPT
    \subfloat{
        \begin{tikzpicture}
    \begin{axis}[
        every axis plot post/.style={/pgf/number format/fixed},
        width=\PlotHeight,
        ybar=1,
        x=0.8cm,
        ylabel near ticks,
        xtick=data,
        enlarge x limits=0.2,
        bar width=8,
        ymajorgrids=true,
        grid style=dashed,
        xticklabel style={rotate=0},
        label style={font=\small},
        tick label style={font=\small},
        ylabel={time [\si{s}]$~\quad~\rightarrow$},
        symbolic x coords={$\text{VPT}_1$,$\text{VPT}_2$,$\text{VPT}_3$}
        ]
    \addplot[draw=cyan,fill=cyan!50] table[x=Result, y={with residual connection}] {\tableVPT};
    \addplot[draw=magenta,fill=magenta!50] table[x=Result, y={without residual connection}]  {\tableVPT};
    \end{axis}
        \end{tikzpicture}
       \label{fig:residual}}      
}%
\setcounter{subfigure}{2}%
\label{fig:adptation}%
\subcaption{\footnotesize{Adaptive activation function comparison.}}%
}